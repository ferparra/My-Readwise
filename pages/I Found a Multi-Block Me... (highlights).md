title:: I Found a Multi-Block Me... (highlights)
author:: [[@polarply on Twitter]]
full-title:: "I Found a Multi-Block Me..."
category:: #tweets
url:: https://twitter.com/polarply/status/1575038253316513797

- Highlights first synced by [[Readwise]] [[Nov 19th, 2022]]
	- I found a multi-block MeV bot that is using probabilities to prey on users unstaking from GMX due to how their tokenomics are designed. Here's how this works:  (1/14) ([View Tweet](https://twitter.com/polarply/status/1575038253316513797))
		- **Note**: Thread
	- GMX allows their native token, GMX, to be staked to receive ETH from a pool consisting of 30% of trading fees generated by the exchange. Currently the default APY is projected at ~18%. (2/14) ([View Tweet](https://twitter.com/polarply/status/1575038255728238593))
	- As part of their tokenomics, staked coins accrue bonus APY: When you stake GMX, you receive Multiplier Points every second at a fixed rate of 100% APR. (3/14) ([View Tweet](https://twitter.com/polarply/status/1575038258051883009))
	- That means 1000 GMX staked for one year would earn 1000 Multiplier Points, so within a year it is as if you would stake 2000 GMX. (4/14) ([View Tweet](https://twitter.com/polarply/status/1575038260749160448))
	- To disincentivize unstaking, users that unstake have their bonus burned. This disincentive is what powers this MeV strategy. (5/14) ([View Tweet](https://twitter.com/polarply/status/1575038263047618562))
	- When a user unstakes they are presented with 3 options: stake again starting with 0 bonus, just hold, or sell their coins. (6/14) ([View Tweet](https://twitter.com/polarply/status/1575038265329319937))
	- The first option is improbable, and the 2nd option also sounds unlikely. 
	  From a naive user’s perspective, why not postpone burning the bonus and stake some more until they really want to sell? (7/14) ([View Tweet](https://twitter.com/polarply/status/1575038267439075328))
	- Therefore we can deduce that should a user unstake, it is very probable they will proceed to sell their coins. 
	  In fact I analyzed blockchain data from Arbiscan to truly understand what users do after unstaking: (8/14) 
	  
	  ![](https://pbs.twimg.com/media/Fdun5nsWIAAO-_j.png) ([View Tweet](https://twitter.com/polarply/status/1575038274036371459))
	- I plotted users' selling habits after unstaking, and for example, found out that for a user with burned APY higher than 60%, there’s a >70% chance of selling the coins within 5 minutes of unstaking.  (9/14) ([View Tweet](https://twitter.com/polarply/status/1575038276867883008))
	- Using this information one could build a probabilistic sandwich bot.. except I found there already is one! https://t.co/MXvEi9OPft (10/14) 
	  
	  ![](https://pbs.twimg.com/media/FduoEYSWIAEF94A.jpg) ([View Tweet](https://twitter.com/polarply/status/1575038281502560256))
	- This MeV strategy sandwiches high volume unstaking actions, selling right after they unstake and buying back after they sell. Using this strategy they’ve generated 55 GMX (2270$) in 45 days. This annualizes to ~18400$ (11/14) ([View Tweet](https://twitter.com/polarply/status/1575038284975468544))
	- Real example:
	  A. User 0xd33 unstakes 5,124 GMX ($212,600)
	  B. 1 seconds later: MeV bot sells 399.00 GMX ($16,550)
	  C. 8 mins later: User 0xd33 sells their 5,124 GMX on Uniswap
	  D. 15 mins later: MeV bot buys back 400.43 GMX for the same price ($16,550)  (12/14) ([View Tweet](https://twitter.com/polarply/status/1575038287106179073))
	- This strategy is probabilistically profitable as can be seen by the unstaking probability graph shown above, and is most efficient with large unstakers as they create the largest sandwich opportunity. Sometimes it fails as users don't sell, but mostly it works. (13/14) ([View Tweet](https://twitter.com/polarply/status/1575038289417228290))
	- Possible solution:
	  Offer an unstake & sell button within one transaction.
	  
	  While now this problem is minor, should GMX be more widely adopted these attacks may become more common and extract higher value.
	  (14/14) ([View Tweet](https://twitter.com/polarply/status/1575038291577286656))
	- PS: GMX has been made aware and rewarded me with 500$ for this finding. ([View Tweet](https://twitter.com/polarply/status/1575039023470751745))